#ifndef INDEX_HTML
#define INDEX_HTML

const char index_html[] PROGMEM = R"rawliteral(

<!DOCTYPE HTML><html>
<head>
  <title>Wikinger LED Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  html {
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
  }
  h1 {
    font-size: 1.8rem;
    color: white;
  }
  h2{
    font-size: 1.5rem;
    font-weight: bold;
    color: #1f386e;
  }
  .topnav {
    overflow: hidden;
    background-color: #1f386e;
  }
  body {
    margin: 0;
  }
  .content {
    padding: 30px;
    max-width: 600px;
    margin: 0 auto;
  }
  .card {
    background-color: #F8F7F9;;
    box-shadow: 2px 2px 12px 1px rgba(140,140,140,.5);
    padding:5px;
    margin-bottom:5px;
  }
  .card p {
    padding-bottom:5px;
  }
  .button {
    padding: 15px 50px;
    font-size: 24px;
    text-align: center;
    outline: none;
    color: #fff;
    background-color: #ea7b38;
    border: none;
    border-radius: 5px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
   }
   /*.button:hover {background-color: #0f8b8d}*/
   .button:active {
     background-color: #0f8b8d;
     box-shadow: 2 2px #CDCDCD;
     transform: translateY(2px);
   }
   .state {
     font-size: 1.5rem;
     color:#724944;
     font-weight: bold;
   }
   .state input, .state label {
     height: 2rem;
     vertical-align: middle;
   }
   .state input.range {
     width: 90%%;
     margin: auto;
   }

   .state.red {
     background-color:red;
   }
   .state.green {
     background-color:green;
   }
   .state.blue {
     background-color:blue;
   }
  </style>
</head>
<body>
  <div class="topnav">
    <h1>Wikinger LED Portal</h1>
  </div>
  <div class="content">
    <div class="card">
      <p class="state red">
        <input id="red" class="range" type="range" name="range" min="0" max="255" step="1" value="%RED_VALUE%" />
      </p>
    </div>
    <div class="card">
      <p class="state green">
        <input id="green" class="range" type="range" name="range" min="0" max="255" step="1" value="%GREEN_VALUE%" />
      </p>
    </div>      
    <div class="card">
      <p class="state blue">
        <input id="blue" class="range" type="range" name="range" min="0" max="255" step="1" value="%BLUE_VALUE%" />
      </p>
    </div>

    <div class="card">
      <p class="state sensorEnabled">
        <label for="darkness">Darkness handler enabled:</label><input type="checkbox" name="darkness" id="darkness" value="1"/>
        <script>
          let darknessEnabled = %DARKNESS_ENABLED%;
          if (darknessEnabled) {
            document.getElementById('darkness').checked = "checked";
          }
        </script>
      </p>
      <p class="state threshold">
        <label for="threshold">Threshold:</label>
        <input id="threshold" class="range" type="range" name="range" min="0" max="%THRESHOLD_LIMIT%" step="1" value="%THRESHOLD_VALUE%" />
      </p>
      <p class="state sensor">
        <label for="sensor">Current level:</label>
        <input id="sensor" class="range" type="range" name="range" min="0" max="255" step="1" value="%SENSOR_VALUE%" disabled/>
      </p>
    </div>    
    <div class="card">
      <p class="state" id="log"><!-- log here --></p>
    </div>
  </div>
<script>
  var gateway = `ws://${window.location.hostname}/ws`;
  var websocket;
  window.addEventListener('load', onLoad);
  function initWebSocket() {
    console.log('Trying to open a WebSocket connection...');
    websocket = new WebSocket(gateway);
    websocket.onopen    = onOpen;
    websocket.onclose   = onClose;
    websocket.onmessage = onMessage;
  }
  function onOpen(event) {
    console.log('Connection opened');
  }
  function onClose(event) {
    console.log('Connection closed');
    setTimeout(initWebSocket, 2000);
  }
  function onMessage(event) {
  	const parts = event.data.split(":");
    const target = parts[0];

    if (parts.length == 2) {
      document.getElementById(target).value = parts[1];
    } else {
      document.getElementById('log').innerHTML = event.data;
    }
  }
  function initRange() {
      const selects = document.getElementsByName('range');

      selects.forEach(function(select) {
          select.addEventListener('change', changeRange);
      });
  }
  function initCheckbox() {
      const checkbox = document.getElementById('darkness');
      checkbox.addEventListener('change', changeCheckbox);
  }
  function changeRange(event) {
    websocket.send(event.target.id + ':' + event.target.value);
  }
  function changeCheckbox(event) {
    let isChecked = event.target.checked ? 1 : 0;
    websocket.send(event.target.id + ':' + isChecked);
  }    
  function onLoad(event) {
    initWebSocket();
    initRange();
    initCheckbox();
  }
</script>
</body>
</html>

)rawliteral";

#endif